import { Callout, Steps } from 'nextra/components'
import Image from 'next/image'

<Callout type="error" emoji="🚫">
TARS-AI is in the early stages of development. You may expect rapid changes to the platform.
</Callout>
<Callout type="warning" emoji="⚠️">
May be out of date or incomplete. Always confirm on our [Discord](https://discord.gg/uXkqkz3mJJ) for the most up-to-date information.
</Callout>

# Assembly Guide
Before assembly, check both the [Bill of Materials](/build/bom) and [3D printing guide](/build/3d_print) to make sure you have all of the parts.

<details>
  <summary>
    <span class="show">Show parts list</span>
  </summary>
  <div class="details-internal flex flex-row">


    <fieldset class="flex-item-half-width">
      <legend>Required:</legend>
      <div>
        <input type="checkbox" id="arm_chasis_lid_1"/>
        <label for="arm_chasis_lid_1"> Arm Chasis Lid 1</label>
      </div>
      <div>
        <input type="checkbox" id="arm_chasis_lid_2"/>
        <label for="arm_chasis_lid_2"> Arm Chasis Lid 2</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_top_chassis"/>
        <label for="arm_left_top_chassis"> Arm Left (Top Chassis)</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_1_finger"/>
        <label for="arm_left_1_finger"> Arm Left 1 Finger</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_2_finger"/>
        <label for="arm_left_2_finger"> Arm Left 2 Finger</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_footpad"/>
        <label for="arm_left_footpad"> Arm Left Footpad</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_insert"/>
        <label for="arm_left_insert"> Arm Left Insert</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_long_finger_lid_countersunk"/>
        <label for="arm_left_long_finger_lid_countersunk"> Arm Left Long Finger Lid countersunk</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_long_finger_lid"/>
        <label for="arm_left_long_finger_lid"> Arm Left Long Finger Lid</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_long_finger"/>
        <label for="arm_left_long_finger"> Arm Left Long Finger</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_lower_chasis"/>
        <label for="arm_left_lower_chasis"> Arm Left Lower Chasis</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_mount"/>
        <label for="arm_left_mount"> Arm Left Mount</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_np_mount_bearing"/>
        <label for="arm_left_np_mount_bearing"> Arm Left NP - Mount Bearing</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_small_finger_lid"/>
        <label for="arm_left_small_finger_lid"> Arm Left Small Finger Lid</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_spring_driver"/>
        <label for="arm_left_spring_driver"> Arm Left Spring Driver</label>
      </div>
      <div>
        <input type="checkbox" id="arm_left_top_lid"/>
        <label for="arm_left_top_lid"> Arm Left Top Lid</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_top_chassis"/>
        <label for="arm_right_top_chassis"> Arm Right (Top Chassis)</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_1_finger"/>
        <label for="arm_right_1_finger"> Arm Right 1 Finger</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_2_finger"/>
        <label for="arm_right_2_finger"> Arm Right 2 Finger</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_footpad"/>
        <label for="arm_right_footpad"> Arm Right Footpad</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_insert"/>
        <label for="arm_right_insert"> Arm Right Insert</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_long_finger_lid_countersunk"/>
        <label for="arm_right_long_finger_lid_countersunk"> Arm Right Long Finger Lid countersunk</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_long_finger"/>
        <label for="arm_right_long_finger"> Arm Right Long Finger</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_lower_chasis"/>
        <label for="arm_right_lower_chasis"> Arm Right Lower Chasis</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_mount"/>
        <label for="arm_right_mount"> Arm Right Mount</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_np_mount_bearing_x4"/>
        <label for="arm_right_np_mount_bearing_x4"> Arm Right NP - Mount Bearing x4</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_small_finger_lid"/>
        <label for="arm_right_small_finger_lid"> Arm Right Small Finger Lid</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_spring_driver"/>
        <label for="arm_right_spring_driver"> Arm Right Spring Driver</label>
      </div>
      <div>
        <input type="checkbox" id="arm_right_tip_lid"/>
        <label for="arm_right_tip_lid"> Arm Right Tip Lid</label>
      </div>
      <div>
        <input type="checkbox" id="arm_suspension_mount_1"/>
        <label for="arm_suspension_mount_1"> Arm Suspension Mount 1</label>
      </div>
      <div>
        <input type="checkbox" id="arm_suspension_mount_2"/>
        <label for="arm_suspension_mount_2"> Arm Suspension Mount 2</label>
      </div>
      <div>
        <input type="checkbox" id="arm_upper_servo_horn_1"/>
        <label for="arm_upper_servo_horn_1"> Arm Upper Servo Horn 1</label>
      </div>
      <div>
        <input type="checkbox" id="arm_upper_servo_horn_2"/>
        <label for="arm_upper_servo_horn_2"> Arm Upper Servo Horn 2</label>
      </div>
      <div>
        <input type="checkbox" id="axle"/>
        <label for="axle"> Axle</label>
      </div>
      <div>
        <input type="checkbox" id="bearing"/>
        <label for="bearing"> Bearing</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_lower_v9_sdcard_and_diy_servo_mod"/>
        <label for="chassis_lower_v9_sdcard_and_diy_servo_mod"> Chassis Lower (v9) SDCARD and DIY Servo MOD</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_lower_lid_mod_pct_mirror_makes_space_for_gpio"/>
        <label for="chassis_lower_lid_mod_pct_mirror_makes_space_for_gpio"> Chassis Lower Lid MOD PCT (mirror) makes space for GPIO</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_lower_servo_mount_diy_servo"/>
        <label for="chassis_lower_servo_mount_diy_servo"> Chassis Lower Servo Mount (DIY Servo)</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_upper_diy_servo_mod"/>
        <label for="chassis_upper_diy_servo_mod"> Chassis Upper DIY Servo Mod</label>
      </div>
      <div>
        <input type="checkbox" id="conncting_arm"/>
        <label for="conncting_arm"> Conncting Arm</label>
      </div>
      <div>
        <input type="checkbox" id="flexor_x8"/>
        <label for="flexor_x8"> Flexor x8</label>
      </div>
      <div>
        <input type="checkbox" id="forearm_1_mirror"/>
        <label for="forearm_1_mirror"> Forearm (1)(Mirror)</label>
      </div>
      <div>
        <input type="checkbox" id="forearm_1"/>
        <label for="forearm_1"> Forearm (1)</label>
      </div>
      <div>
        <input type="checkbox" id="internal_hand_a_1"/>
        <label for="internal_hand_a_1"> Internal Hand A 1</label>
      </div>
      <div>
        <input type="checkbox" id="internal_hand_a_2"/>
        <label for="internal_hand_a_2"> Internal Hand A 2</label>
      </div>
      <div>
        <input type="checkbox" id="internal_hand_b_1"/>
        <label for="internal_hand_b_1"> Internal Hand B 1</label>
      </div>
      <div>
        <input type="checkbox" id="internal_hand_b_2"/>
        <label for="internal_hand_b_2"> Internal Hand B 2</label>
      </div>
      <div>
        <input type="checkbox" id="internal_hand_c_1"/>
        <label for="internal_hand_c_1"> Internal Hand C 1</label>
      </div>
      <div>
        <input type="checkbox" id="internal_hand_c_2"/>
        <label for="internal_hand_c_2"> Internal Hand C 2</label>
      </div>
      <div>
        <input type="checkbox" id="main_axle"/>
        <label for="main_axle"> Main Axle</label>
      </div>
      <div>
        <input type="checkbox" id="newflexor_countersunk_1"/>
        <label for="newflexor_countersunk_1"> NewFlexor countersunk 1</label>
      </div>
      <div>
        <input type="checkbox" id="newflexor_countersunk_2"/>
        <label for="newflexor_countersunk_2"> NewFlexor countersunk 2</label>
      </div>
      <div>
        <input type="checkbox" id="newflexor_1"/>
        <label for="newflexor_1"> NewFlexor 1</label>
      </div>
      <div>
        <input type="checkbox" id="newflexor_2"/>
        <label for="newflexor_2"> NewFlexor 2</label>
      </div>
      <div>
        <input type="checkbox" id="pct_212_mount_x3"/>
        <label for="pct_212_mount_x3"> PCT_212 Mount x3</label>
      </div>
      <div>
        <input type="checkbox" id="pusher_rod"/>
        <label for="pusher_rod"> Pusher Rod</label>
      </div>
      <div>
        <input type="checkbox" id="rpi_fan_and_amp_bracket"/>
        <label for="rpi_fan_and_amp_bracket"> RPI Fan and AMP Bracket</label>
      </div>
      <div>
        <input type="checkbox" id="secondary_axle"/>
        <label for="secondary_axle"> Secondary Axle</label>
      </div>
      <div>
        <input type="checkbox" id="servi_clip"/>
        <label for="servi_clip"> Servi Clip</label>
      </div>
      <div>
        <input type="checkbox" id="servo_clip_mirror"/>
        <label for="servo_clip_mirror"> Servo Clip (Mirror)</label>
      </div>
      <div>
        <input type="checkbox" id="servo_horn_printable"/>
        <label for="servo_horn_printable"> Servo Horn (printable)</label>
      </div>
      <div>
        <input type="checkbox" id="spacer"/>
        <label for="spacer"> Spacer</label>
      </div>
      <div>
        <input type="checkbox" id="sus_mount_a"/>
        <label for="sus_mount_a"> SUS Mount A</label>
      </div>
      <div>
        <input type="checkbox" id="sus_mount_b"/>
        <label for="sus_mount_b"> SUS Mount B</label>
      </div>
      <div>
        <input type="checkbox" id="upper_strut_mount_1"/>
        <label for="upper_strut_mount_1"> Upper Strut Mount 1</label>
      </div>
      <div>
        <input type="checkbox" id="upper_strut_mount_2"/>
        <label for="upper_strut_mount_2"> Upper Strut Mount 2</label>
      </div>
    </fieldset>

    <fieldset class="flex-item-half-width">
      <legend>5.0" Screen(optional):</legend>
      <div>
        <input type="checkbox" id="5in_display_spacer"/>
        <label for="5in_display_spacer">5in display spacer</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_connector_screen_support"/>
        <label for="chassis_connector_screen_support"> Chassis Connector Screen Support</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_upper_lid_v9"/>
        <label for="chassis_upper_lid_v9"> Chassis Upper Lid (v9)</label>
      </div>
      <div>
        <input type="checkbox" id="chassis_upper_lid_letters_v9"/>
        <label for="chassis_upper_lid_letters_v9"> Chassis Upper Lid Letters (v9)</label>
      </div>
      <legend> </legend>
      <legend>3.5" Screen (optional):</legend>
        <div>
        <input type="checkbox" id="cameracover"/>
        <label for="cameracover"> CameraCover</label>
      </div>
      <div>
        <input type="checkbox" id="rpi_cam_and_speaker_mount"/>
        <label for="rpi_cam_and_speaker_mount"> RPI CAM and Speaker Mount</label>
      </div>
      <div>
        <input type="checkbox" id="tars_3_5_lcd_new_holes"/>
        <label for="tars_3_5_lcd_new_holes"> TARS 3.5_ LCD-new holes</label>
      </div>
    </fieldset>


    <fieldset class="flex-item-half-width">
      <legend>Bill of Materials:</legend>
      <div>
        <input type="checkbox" id="servos"/>
        <label for="servos"> Servos</label>
      </div>
      <div>
        <input type="checkbox" id="controller"/>
        <label for="controller"> BT Controller</label>
      </div>
      <div>
        <input type="checkbox" id="servo_driver_board"/>
        <label for="servo_driver_board"> Servo driver board</label>
      </div>
      <div>
        <input type="checkbox" id="camera"/>
        <label for="camera"> Camera</label>
      </div>
      <div>
        <input type="checkbox" id="battery"/>
        <label for="battery"> Battery</label>
      </div>
      <div>
        <input type="checkbox" id="12v_to_5v"/>
        <label for="12v_to_5v"> 12V to 5V/6V</label>
      </div>
      <div>
        <input type="checkbox" id="microphone"/>
        <label for="microphone">Usb Microphone</label>
      </div>
      <div>
        <input type="checkbox" id="speaker"/>
        <label for="speaker"> Speaker</label>
      </div>
      <div>
        <input type="checkbox" id="amplifier"/>
        <label for="amplifier"> Amplifier</label>
      </div>
    </fieldset>
  </div>
</details>

**Notes:**
- Be sure not to strip 3d printed parts when installing screws.

---

<Steps>

### Prepare Components

- Remove all supports and prepare components for assembly.

<Image src="/assemble/cleansupports.png" alt="Component preparation" width={384} height={288} />

### Assemble the chassis

- Connect the chassis upper and chassis lower by securing the connector support mount with M3 20mm screws.

<Image src="/assemble/Step1.png" alt="Step 1" width={384} height={288} />

### Assemble the motion dividers (do for the left and right side)

- Insert the 608 bearing(printed or metal) into the Arm Spring divider
- Secure the arm spring divider to the arm Suspension mount

<Image src="/assemble/Step2.png" alt="Step 2" width={384} height={288} />

### Assemble the Chassis Structure

- Secure the motion divider assembly to the upper chassis with 8 screws

<Image src="/assemble/Step3.png" alt="Step 3" width={384} height={288} />

### Assemble the Arm Suspension Components

- Remove the left Arm Spring Divider
- Insert one spring into each upper chassis mount spring spot
- Attach the Upper Strut Mount to the spring
- Insert the secondary_axle into both slots through the upper strut mount and into the slots of the divider

<Image src="/assemble/Step4.png" alt="Step 4" width={384} height={288} />

### Assemble the Arm Suspension Mounts with Spring Dividers

- Re-attach the left Spring divider
- Ensure all parts are seated fully as this will create binding issues later. Use caution not to break 3d printed parts.

<Image src="/assemble/Step5.png" alt="Step 5" width={384} height={288} />

### Secure Servo controller & Buck Convertor

- Secure the 16ch PWM servo controller to the lower chassis (hand tightened)
- Secure the 12v to 5v/6v buck converter to the lower chassis with m3 * 10mm screws

<Image src="/assemble/Step6.png" alt="Step 6" width={384} height={288} />

### Insert USB Mic and RPI

- Insert USB Mic into the RPI
- Secure the RPI to chassis lower with m2*4mm screws.
**carefull not to over tighten**

<Image src="/assemble/Step7.png" alt="Step 7" width={384} height={288} />

### Install 25T metal servo arm and connecting rod

- Secure the metal servo 25T arm to the center servo.
- Attach upper connecting rod arm with m3*12mm screw.

<Image src="/assemble/Step8.png" alt="Step 8" width={384} height={288} />


### Center Servos and calibrate

<Callout type="warning" emoji="⚠️">
This step is very important and can result in broken parts if not calibrated correctly!
</Callout>

1. Connect Servos to the Servo Controller:

- Attach the center servo to the first set of pins on the servo controller (Pin 0)
- Connect the robot's left (port) arm to the next set of pins (Pin 1)
- Connect the robot's right (starboard) arm to the following set of pins (Pin 2)

2. Connect the PWM Servo Controller to the Raspberry Pi:

- Use the servotester.py script to determine the minimum and maximum PWM values the servo can operate within
- Calculate the dead center value (midpoint) between the minimum and maximum PWM values
- Manually attach the arms at the midpoint position to ensure proper alignment

3. Update the Configuration File:

- Add the determined center PWM value as neutral to the config.ini file. Add 50 to neutral for up and subtract 50 for down limits

4. Center the Arms Mechanically:

- Using the servo test tool, set each arm's servo channel to a midpoint value, such as 350 (between the typical range of 100-600)
- Detach the arms, reposition them to align mechanically with the center position, and then reattach them
- This ensures the arms are mechanically centered at the specified midpoint value (e.g., 350). For example if you set 350 they should be vertical and perfectly straight

5. Calibrate the Center Servo:

- Set the center servo to its lowest position (e.g., 88) using the servo test tool
- Reposition and reattach the center servo to align with the lowest point
- Define this position (e.g., 88) as UPHEIGHT in the config.ini file

### Install 608 bearing to Left / Right arm mount

- Install 608 bearing to Left / Right arm mount

<Image src="/assemble/Step9.png" alt="Step 9" width={384} height={288} />

### Secure Arm upper servo horn

- Connect servo to RPI first, the PORT and STARBOARD servos should go in pin 1 and 2 (the first pin is 0).
- Secure the arm upper servo horm to the servo

<Image src="/assemble/Step10.png" alt="Step 10" width={384} height={288} />

### Attach the Upper Arm mount to the servo

- Rotate the servo horn as needed to align the bolts
- Insert m3*14mm screws from the servo side into the arm mount

<Image src="/assemble/Step11.png" alt="Step 11" width={384} height={288} />

### Attach secondary axle lifting rod

- Insert the secondary axle main lifting rod into the center servo connection

<Image src="/assemble/Step12.png" alt="Step 12" width={384} height={288} />

### Slide arms into place with upper rod

- Insert upper lifting rod into the left arm mount
- Thread the upper liffting rod thorugh the spring assembly into the right arm mount
- Secure the lifting rod with 4 screws into the top of the left and right arm mounts

<Image src="/assemble/Step13.png" alt="Step 13" width={384} height={288} />

### Rotate assembly and insert center servo

- Rotate the left and right mount arms vertically
- Insert the center servo lifting rod into the 608 arm bearings

<Image src="/assemble/Step14.png" alt="Step 14" width={384} height={288} />

### Insert sus mounts

- Slide the Sus mounts onto the center lifting rod ends
- Ensure the beveled / lip of the sus mount faces into the chassis

<Image src="/assemble/Step15.png" alt="Step 15" width={384} height={288} />

### Rotate assembly into place and secure

- Rotate the assembly into the chassis 
- Ensure the center servo slides into its mount point
- Secure the sus mounts with m4*10mm screws

<Image src="/assemble/Step16.png" alt="Step 16" width={384} height={288} />

### Secure Center Servo

- Secure the center servo wit the servo bracket

<Image src="/assemble/Step17.png" alt="Step 17" width={384} height={288} />

### Install / Assemble fingers

- Install lazy legs / simplifed legs / or leg assembly as pictured
- This section is still very much a wip.

<Image src="/assemble/Step18.png" alt="Step 18" width={384} height={288} />

</Steps>
---

This completes the main assembly of TARS. Ensure all connections are secure, and all screws are tightened. Now move onto wiring him up.

## Wiring Guide for GPIO LCD Screen (if not using HDMI) and I2S Amplifier

This section provides detailed instructions on how to wire an LCD display and an I2S amplifier to a Raspberry Pi, along with steps to connect a 16CH PWM servo controller. It assumes you are using an SPI-based LCD screen and an I2S amplifier for audio output

<Callout type="info" emoji="ℹ️">
  Ensure your Raspberry Pi is powered off before making any connections to avoid damage to the hardware.
</Callout>

<Image src="/assemble/rpiwires.jpg" alt="Component preparation" width={384} height={288} />

### LCD Wiring

To wire the LCD display to your Raspberry Pi, use the following pinout configuration:

| LCD Pin          | Raspberry Pi GPIO Pin      | Description                                     |
|------------------|----------------------------|-------------------------------------------------|
| 1, 17            | 3.3V   (Pin 1 or 17)       | 3.3V power supply                               |
| 2, 4             | 5V     (Pin 2 or 4)        | 5V power supply for the backlight (if required) |
| 6, 9, 14, 20, 25 | GND    (Pin 6, 9, etc.)    | Ground connections                              |
| 11               | GPIO17 (Pin 11)            | Touch IRQ (optional, for touch input)           |
| 18               | GPIO24 (Pin 18)            | LCD Register Select (DC/RS)                     |
| 19               | GPIO10 (Pin 19, SPI MOSI)  | SPI MOSI (data sent to the LCD)                 |
| 21               | GPIO9  (Pin 21, SPI MISO)  | SPI MISO (data received from touchscreen)       |
| 22               | GPIO25 (Pin 22)            | LCD Reset pin                                   |
| 23               | GPIO11 (Pin 23, SPI SCLK)  | SPI Clock for LCD and touchscreen               |
| 24               | GPIO8  (Pin 24, SPI CE0)   | SPI Chip Select for LCD                         |
| 26               | GPIO7  (Pin 26, SPI CE1)   | SPI Chip Select for touchscreen                 |

### Connecting the I2S Amplifier

For audio output, connect an I2S amplifier to the Raspberry Pi’s I2S (PCM) pins as follows:

| Raspberry Pi Pin | GPIO Pin | Function                     | Connect to Amplifier                |
|------------------|----------|------------------------------|-------------------------------------|
| Pin 12           | GPIO18   | I2S Bit Clock (BCLK)         | BCLK                                |
| Pin 35           | GPIO19   | I2S Left/Right Clock (LRCLK) | LRCLK                               |
| Pin 40           | GPIO21   | I2S Data Out (DOUT)          | DIN (Audio Data Input to Amplifier) |
| Pin 6            | GND      | Ground                       | GND (Amplifier Ground)              |
| Pin 2 or 4       | 5V       | Power Supply                 | VIN (Amplifier Power Input)         |

### Connecting the 16CH PWM Servo Controller

To connect a 16CH PWM servo controller to your Raspberry Pi via I2C, use the following pinout configuration:

| Controller Pin | Raspberry Pi GPIO Pin | Description                              |
|----------------|-----------------------|------------------------------------------|
| GND            | GND (Pin 6, etc.)     | Ground connection                        |
| SCL            | SCL (Pin 5)           | Serial Clock Line for I2C communication  |
| SDA            | SDA (Pin 3)           | Serial Data Line for I2C communication   |
| VCC            | 3.3V (Pin 1 or 17)    | Power for the I2C logic                  |

### Next Steps
Once assembly is complete, move to [software setup](/build/setup).

<Callout type="default" emoji="👉">
  **Documentation Contributors:** @alexander-wang03, @pyrater
</Callout>

